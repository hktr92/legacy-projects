<?php
/**
* WoltLab Community Framework
* Template: boardList
* Compiled at: Fri, 30 Aug 2013 22:18:57 +0000
* 
* DO NOT EDIT THIS FILE
*/
$this->v['tpl']['template'] = 'boardList';
?>
<?php
if (!isset($this->pluginObjects['TemplatePluginFunctionCycle'])) {
require_once(WCF_DIR.'lib/system/template/plugin/TemplatePluginFunctionCycle.class.php');
$this->pluginObjects['TemplatePluginFunctionCycle'] = new TemplatePluginFunctionCycle;
}
if (!isset($this->pluginObjects['TemplatePluginFunctionCounter'])) {
require_once(WCF_DIR.'lib/system/template/plugin/TemplatePluginFunctionCounter.class.php');
$this->pluginObjects['TemplatePluginFunctionCounter'] = new TemplatePluginFunctionCounter;
}
if (!isset($this->pluginObjects['TemplatePluginModifierShorttime'])) {
require_once(WCF_DIR.'lib/system/template/plugin/TemplatePluginModifierShorttime.class.php');
$this->pluginObjects['TemplatePluginModifierShorttime'] = new TemplatePluginModifierShorttime;
}
?><?php if (count($this->v['boards']) > 0) { ?>
	<?php echo $this->pluginObjects['TemplatePluginFunctionCycle']->execute(array('name' => 'boardlistCycle', 'values' => '1,2', 'advance' => false, 'print' => false), $this); ?>
	<ul id="boardlist">
		<?php
if (count($this->v['boards']) > 0) {
foreach ($this->v['boards'] as $this->v['child']) {
?>
			
			<?php $this->assign("depth", $this->v['child']['depth']); ?>
			<?php $this->assign("open", $this->v['child']['open']); ?>
			<?php $this->assign("hasChildren", $this->v['child']['hasChildren']); ?>
			<?php $this->assign("openParents", $this->v['child']['openParents']); ?>
			<?php $this->assign("board", $this->v['child']['board']); ?>
			<?php $this->assign("boardID", $this->v['board']->boardID); ?>
			<?php echo $this->pluginObjects['TemplatePluginFunctionCounter']->execute(array('assign' => 'boardNo', 'print' => false), $this); ?>
			<?php if ($this->v['board']->isBoard()) { ?>
				
				
				<li<?php if ($this->v['depth'] == 1) { ?> class="board border"<?php } ?>>
					<div class="boardlistInner container-<?php echo $this->pluginObjects['TemplatePluginFunctionCycle']->execute(array('name' => 'boardlistCycle'), $this); ?> board<?php echo $this->v['boardID']; ?>">
						<div class="boardlistTitle<?php if (BOARD_LIST_ENABLE_LAST_POST) { ?> boardlistCols-2<?php } ?>">
							<div class="containerIcon">
								<img id="boardIcon<?php echo $this->v['boardNo']; ?>" src="<?php ob_start(); ?><?php echo StringUtil::encodeHTML($this->v['board']->getIconName()); ?><?php if ($this->v['newPosts'][$this->v['boardID']]) { ?>New<?php } ?>M.png<?php $_iconf247e1c578f2d399bf4ab6590d2e8abafcfe0813 = ob_get_contents(); ob_end_clean(); echo StyleManager::getStyle()->getIconPath($_iconf247e1c578f2d399bf4ab6590d2e8abafcfe0813); ?>" alt="" />
							</div>
							
							<div class="containerContent">
								<?php if ($this->v['depth'] > 3) { ?><h6 class="boardTitle"><?php } else { ?><h<?php echo $this->v['depth']+2; ?> class="boardTitle"><?php } ?>
									<a id="boardLink<?php echo $this->v['boardNo']; ?>" <?php if ($this->v['newPosts'][$this->v['boardID']]) { ?>class="new" <?php } ?>href="index.php?page=Board&amp;boardID=<?php echo $this->v['boardID']; ?><?php echo SID_ARG_2ND; ?>"><?php $this->tagStack[] = array('lang', array()); ob_start(); ?><?php echo StringUtil::encodeHTML($this->v['board']->title); ?><?php $_langb597abf5a880f516d715ff146c6a3691b79930ab = ob_get_contents(); ob_end_clean(); echo WCF::getLanguage()->getDynamicVariable($_langb597abf5a880f516d715ff146c6a3691b79930ab, $this->tagStack[count($this->tagStack) - 1][1]); array_pop($this->tagStack); ?><?php if (isset($this->v['unreadThreadsCount'][$this->v['boardID']])) { ?><span>&nbsp;(<?php echo StringUtil::formatNumeric($this->v['unreadThreadsCount'][$this->v['boardID']]); ?>)</span><?php } ?></a>
								<?php if ($this->v['depth'] > 3) { ?></h6><?php } else { ?></h<?php echo $this->v['depth']+2; ?>><?php } ?>
								
								<?php if ($this->v['board']->description) { ?>
									<p class="boardlistDescription">
										<?php $this->tagStack[] = array('lang', array()); ob_start(); ?><?php if ($this->v['board']->allowDescriptionHtml) { ?><?php echo $this->v['board']->description; ?><?php } else { ?><?php echo StringUtil::encodeHTML($this->v['board']->description); ?><?php } ?><?php $_lang5ab3f8aaca4794d21274e018f60e6f49f992e322 = ob_get_contents(); ob_end_clean(); echo WCF::getLanguage()->getDynamicVariable($_lang5ab3f8aaca4794d21274e018f60e6f49f992e322, $this->tagStack[count($this->tagStack) - 1][1]); array_pop($this->tagStack); ?>
									</p>
								<?php } ?>
								
								<?php if (isset($this->v['child']['additionalBoxes'])) { ?><?php echo $this->v['child']['additionalBoxes']; ?><?php } ?>
							</div>
						</div>
					
						<?php if (isset($this->v['lastPosts'][$this->v['boardID']])) { ?>
							<div class="boardlistLastPost">								
								<div class="containerIconSmall"><a href="index.php?page=Thread&amp;threadID=<?php echo $this->v['lastPosts'][$this->v['boardID']]->threadID; ?>&amp;action=firstNew<?php echo SID_ARG_2ND; ?>"><img src="<?php ob_start(); ?>goToFirstNewPostS.png<?php $_icon52ad194e12c6e696e46e3db3c13516b7e6e5481e = ob_get_contents(); ob_end_clean(); echo StyleManager::getStyle()->getIconPath($_icon52ad194e12c6e696e46e3db3c13516b7e6e5481e); ?>" alt="" title="Jump to the first unread post" /></a></div>
								<div class="containerContentSmall">
									<p>
										<span class="prefix"><strong><?php $this->tagStack[] = array('lang', array()); ob_start(); ?><?php echo StringUtil::encodeHTML($this->v['lastPosts'][$this->v['boardID']]->prefix); ?><?php $_langcff294247f247eee53d9dfc90db61faefe4fc68a = ob_get_contents(); ob_end_clean(); echo WCF::getLanguage()->getDynamicVariable($_langcff294247f247eee53d9dfc90db61faefe4fc68a, $this->tagStack[count($this->tagStack) - 1][1]); array_pop($this->tagStack); ?></strong></span>
										<a href="index.php?page=Thread&amp;threadID=<?php echo $this->v['lastPosts'][$this->v['boardID']]->threadID; ?>&amp;action=firstNew<?php echo SID_ARG_2ND; ?>"><?php echo StringUtil::encodeHTML($this->v['lastPosts'][$this->v['boardID']]->topic); ?></a>
									</p>
									<p>By
										<?php if ($this->v['lastPosts'][$this->v['boardID']]->lastPosterID != 0) { ?>
											<a href="index.php?page=User&amp;userID=<?php echo $this->v['lastPosts'][$this->v['boardID']]->lastPosterID; ?><?php echo SID_ARG_2ND; ?>"><?php echo StringUtil::encodeHTML($this->v['lastPosts'][$this->v['boardID']]->lastPoster); ?></a>
										<?php } else { ?>
											<?php echo StringUtil::encodeHTML($this->v['lastPosts'][$this->v['boardID']]->lastPoster); ?>
										<?php } ?>
										<span class="light">(<?php echo $this->pluginObjects['TemplatePluginModifierShorttime']->execute(array($this->v['lastPosts'][$this->v['boardID']]->lastPostTime), $this); ?>)</span>
									</p>
								</div>
							</div>
						<?php } ?>
						
						<!--[if IE 7]><span> </span><![endif]-->
					</div>
			<?php } ?>
			
			<?php if ($this->v['board']->isCategory()) { ?>
				
				<?php echo $this->pluginObjects['TemplatePluginFunctionCycle']->execute(array('name' => 'boardlistCycle', 'advance' => false, 'print' => false, 'reset' => true), $this); ?>
				<li<?php if ($this->v['depth'] == 1) { ?> class="category border"<?php } ?>>
					<div class="containerHead boardlistInner board<?php echo $this->v['boardID']; ?>">
						<div class="boardlistTitle">
							<div class="containerIcon">
								
							</div>
							<div class="containerContent">
								<?php if ($this->v['depth'] > 3) { ?><h6 class="boardTitle"><?php } else { ?><h<?php echo $this->v['depth']+2; ?> class="boardTitle"><?php } ?>
									<a id="boardLink<?php echo $this->v['boardNo']; ?>" <?php if ($this->v['newPosts'][$this->v['boardID']]) { ?>class="new" <?php } ?>href="index.php?page=Board&amp;boardID=<?php echo $this->v['boardID']; ?><?php echo SID_ARG_2ND; ?>"><?php $this->tagStack[] = array('lang', array()); ob_start(); ?><?php echo StringUtil::encodeHTML($this->v['board']->title); ?><?php $_lang48571ede759ac1350cf31ad90570cb51105afd58 = ob_get_contents(); ob_end_clean(); echo WCF::getLanguage()->getDynamicVariable($_lang48571ede759ac1350cf31ad90570cb51105afd58, $this->tagStack[count($this->tagStack) - 1][1]); array_pop($this->tagStack); ?><?php if (isset($this->v['unreadThreadsCount'][$this->v['boardID']])) { ?> (<?php echo StringUtil::formatNumeric($this->v['unreadThreadsCount'][$this->v['boardID']]); ?>)<?php } ?></a>
								<?php if ($this->v['depth'] > 3) { ?></h6><?php } else { ?></h<?php echo $this->v['depth']+2; ?>><?php } ?>
								<?php if ($this->v['board']->description) { ?>
									<p class="boardlistDescription">
										<?php $this->tagStack[] = array('lang', array()); ob_start(); ?><?php if ($this->v['board']->allowDescriptionHtml) { ?><?php echo $this->v['board']->description; ?><?php } else { ?><?php echo StringUtil::encodeHTML($this->v['board']->description); ?><?php } ?><?php $_lang52ce338188aa54b93671fc52a3224c4d84f60e67 = ob_get_contents(); ob_end_clean(); echo WCF::getLanguage()->getDynamicVariable($_lang52ce338188aa54b93671fc52a3224c4d84f60e67, $this->tagStack[count($this->tagStack) - 1][1]); array_pop($this->tagStack); ?>
									</p>
								<?php } ?>
								
								<?php if (isset($this->v['subBoards'][$this->v['boardID']])) { ?>
									<div class="boardlistSubboards">
										<ul>
											<?php
$this->v['tpl']['foreach']['subBoards']['total'] = count($this->v['subBoards'][$this->v['boardID']]);
$this->v['tpl']['foreach']['subBoards']['show'] = ($this->v['tpl']['foreach']['subBoards']['total'] > 0 ? true : false);
$this->v['tpl']['foreach']['subBoards']['iteration'] = 0;
if (count($this->v['subBoards'][$this->v['boardID']]) > 0) {
foreach ($this->v['subBoards'][$this->v['boardID']] as $this->v['subBoard']) {
$this->v['tpl']['foreach']['subBoards']['first'] = ($this->v['tpl']['foreach']['subBoards']['iteration'] == 0 ? true : false);
$this->v['tpl']['foreach']['subBoards']['last'] = (($this->v['tpl']['foreach']['subBoards']['iteration'] == $this->v['tpl']['foreach']['subBoards']['total'] - 1) ? true : false);
$this->v['tpl']['foreach']['subBoards']['iteration']++;
?><?php $this->assign("subBoardID", $this->v['subBoard']->boardID); ?><?php echo $this->pluginObjects['TemplatePluginFunctionCounter']->execute(array('assign' => 'boardNo', 'print' => false), $this); ?><li<?php if ($this->v['tpl']['foreach']['subBoards']['last']) { ?> class="last"<?php } ?>><?php if ($this->v['depth'] > 4) { ?><h6><?php } else { ?><h<?php echo $this->v['depth']+3; ?>><?php } ?><img id="boardIcon<?php echo $this->v['boardNo']; ?>" src="<?php ob_start(); ?><?php if ($this->v['subBoard']->isBoard()) { ?>board<?php if ($this->v['newPosts'][$this->v['subBoardID']]) { ?>New<?php } ?><?php } elseif ($this->v['subBoard']->isCategory()) { ?>category<?php } else { ?>boardRedirect<?php } ?>S.png<?php $_icon7811908489e645708664282d85ada403de30ab7b = ob_get_contents(); ob_end_clean(); echo StyleManager::getStyle()->getIconPath($_icon7811908489e645708664282d85ada403de30ab7b); ?>" alt="" <?php if ($this->v['subBoard']->isBoard() && $this->v['newPosts'][$this->v['subBoardID']]) { ?>title="Mark Forum as read by double click" <?php } ?>/>&nbsp;<a id="boardLink<?php echo $this->v['boardNo']; ?>" <?php if ($this->v['newPosts'][$this->v['subBoardID']]) { ?>class="new" <?php } ?>href="index.php?page=Board&amp;boardID=<?php echo $this->v['subBoardID']; ?><?php echo SID_ARG_2ND; ?>"><?php $this->tagStack[] = array('lang', array()); ob_start(); ?><?php echo StringUtil::encodeHTML($this->v['subBoard']->title); ?><?php $_langcffdf89b7fd88344e589677a952c2ca9332ccb95 = ob_get_contents(); ob_end_clean(); echo WCF::getLanguage()->getDynamicVariable($_langcffdf89b7fd88344e589677a952c2ca9332ccb95, $this->tagStack[count($this->tagStack) - 1][1]); array_pop($this->tagStack); ?><?php if (isset($this->v['unreadThreadsCount'][$this->v['subBoardID']])) { ?> <span>(<?php echo StringUtil::formatNumeric($this->v['unreadThreadsCount'][$this->v['subBoardID']]); ?>)</span><?php } ?></a><?php if ($this->v['depth'] > 4) { ?></h6><?php } else { ?></h<?php echo $this->v['depth']+3; ?>><?php } ?></li><?php } } ?>
										</ul>
									</div>
								<?php } ?>
								
								<?php if (isset($this->v['child']['additionalBoxes'])) { ?><?php echo $this->v['child']['additionalBoxes']; ?><?php } ?>
							</div>
						</div>
					</div>
			<?php } ?>
			
			<?php if ($this->v['hasChildren']) { ?><ul id="category<?php echo $this->v['boardID']; ?>"><?php } else { ?></li><?php } ?>
			<?php if ($this->v['openParents'] > 0) { ?><?php echo str_repeat("</ul></li>",$this->v['openParents']); ?><?php } ?>
		<?php } } ?>
	</ul>
<?php } ?>